const x={title:"Nuxt实践经验",description:"执行过程，缓存，压测，内存分析"},F='<h2 id="nuxt&#xA0;JS"><a href="#nuxt&#xA0;JS"></a>nuxt&#xA0;JS</h2>\n<h3 id="&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x540E;&#x53D1;&#x751F;&#x7684;"><a href="#&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x540E;&#x53D1;&#x751F;&#x7684;"></a>&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x540E;&#x53D1;&#x751F;&#x7684;</h3>\n<p>&#x6267;&#x884C;&#x987A;&#x5E8F;&#xA0;1-1-2-3</p>\n<p>koa&#x91CC;&#x9762;</p>\n<ol>\n<li>server&#xA0;koa&#xA0;middleware</li>\n</ol>\n<p>nuxt.render&#x91CC;&#x9762;</p>\n<ol>\n<li>connect&#xA0;middleware</li>\n<li>load&#xA0;and&#xA0;execute&#xA0;vue&#xA0;plugins</li>\n<li>load&#xA0;and&#xA0;execute&#xA0;vue&#xA0;router&#xA0;middleware</li>\n</ol>\n<p><a href="https://nuxtjs.org/guide#schema">&#x5B98;&#x65B9;&#x94FE;&#x63A5;</a></p>\n<h2 id="Node &#x7F13;&#x5B58;&#x65B9;&#x6848;&#x5BF9;&#x6BD4;"><a href="#Node &#x7F13;&#x5B58;&#x65B9;&#x6848;&#x5BF9;&#x6BD4;"></a>Node &#x7F13;&#x5B58;&#x65B9;&#x6848;&#x5BF9;&#x6BD4;</h2>\n<p>Redis&#xA0;vs&#xA0;Simple&#xA0;Memory</p>\n<h3 id="[Redis]:"><a href="#[Redis]:"></a>[Redis]:</h3>\n<p>pros:</p>\n<ol>\n<li>&#x5916;&#x90E8;&#x7F13;&#x5B58;&#xFF0C;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;</li>\n<li>&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x8DB3;&#x591F;&#x591A;</li>\n</ol>\n<p>cons:</p>\n<ol>\n<li>&#x590D;&#x6742;</li>\n<li>&#x5F02;&#x6B65;</li>\n<li>&#x91CD;&#x542F;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x4F1A;&#x6E05;&#x7A7A;&#x7F13;&#x5B58;&#xFF08;&#x4F1A;&#x5BFC;&#x81F4;&#x9884;&#x671F;&#x7684;&#x6539;&#x52A8;&#x6548;&#x679C;&#x6CA1;&#x6CD5;&#x7ACB;&#x5373;&#x5C55;&#x73B0;&#x5728;&#x7528;&#x6237;&#x9762;&#x524D;&#xFF09;&#xFF0C;&#x9700;&#x8981;&#x505A;&#x624B;&#x52A8;&#x5904;&#x7406;</li>\n<li>&#x6574;&#x4F53;&#x7684;&#x8FD0;&#x884C;&#x914D;&#x7F6E;&#x4F1A;&#x6BD4;&#x8F83;&#x591A;</li>\n<li>&#x4E0D;&#x8FC7;&#x5B58;&#x50A8;&#x4E0D;&#x4E86;&#xA0;Promise</li>\n</ol>\n<h3 id="[Simple&#xA0;Memory]:"><a href="#[Simple&#xA0;Memory]:"></a>[Simple&#xA0;Memory]:</h3>\n<p>props:</p>\n<ol>\n<li>&#x7B80;&#x5355;</li>\n<li>&#x540C;&#x6B65;</li>\n<li>&#x91CD;&#x542F;&#x540E;&#x6570;&#x636E;&#x91CD;&#x7F6E;\n&#x80FD;&#x5B58;&#x50A8;&#xA0;Promise&#xA0;&#x7B49;&#xA0;Node&#x81EA;&#x5E26;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x7075;&#x6D3B;&#x6027;&#xFF08;&#x73B0;&#x9636;&#x6BB5;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528;&#x5728;axios&#x7684;&#x63A5;&#x53E3;adapter&#xA0;promise&#x7F13;&#x5B58;&#x4E0A;&#xFF09;</li>\n</ol>\n<p>cons:</p>\n<ol>\n<li>&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;</li>\n</ol>\n<h3 id="Redis &#x672C;&#x5730;&#x53EF;&#x89C6;&#x5316;&#x6D4B;&#x8BD5;"><a href="#Redis &#x672C;&#x5730;&#x53EF;&#x89C6;&#x5316;&#x6D4B;&#x8BD5;"></a>Redis &#x672C;&#x5730;&#x53EF;&#x89C6;&#x5316;&#x6D4B;&#x8BD5;</h3>\n<pre><code class="language-bash">npm&#xA0;install&#xA0;-g&#xA0;redis-commander\nredis-commander\n</code></pre>\n<h3 id="&#x7ED3;&#x8BBA;&#xFF1A;"><a href="#&#x7ED3;&#x8BBA;&#xFF1A;"></a>&#x7ED3;&#x8BBA;&#xFF1A;</h3>\n<p>&#x76EE;&#x524D;&#x5148;&#x4F7F;&#x7528;memory&#xFF08;node-cache&#xFF09;&#x505A;&#x7F13;&#x5B58;&#xFF0C;&#x540E;&#x9762;&#x9047;&#x5230;&#x5BF9;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#x6BD4;&#x8F83;&#x5F3A;&#x7684;&#x9700;&#x6C42;(&#x6BD4;&#x5982;&#xFF1A;&#x62A2;&#x8D2D;&#x4F1A;&#x542F;&#x52A8;&#x51E0;&#x5341;&#x5230;&#x51E0;&#x767E;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x7F3A;&#x5C11;&#x4E00;&#x81F4;&#x6027;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x7F13;&#x5B58;&#x6548;&#x679C;)&#x65F6;&#xFF0C;&#x518D;&#x6539;&#x4E3A;redis&#xFF08;note&#xA0;:&#xA0;Redis&#xA0;cache&#xA0;is&#xA0;an&#xA0;external&#xA0;cache&#xA0;and&#xA0;is&#xA0;not&#xA0;reset&#xA0;when&#xA0;redeploy&#xA0;application&#xFF09;</p>\n<h2 id="&#x6027;&#x80FD;&#x6D4B;&#x8BD5;"><a href="#&#x6027;&#x80FD;&#x6D4B;&#x8BD5;"></a>&#x6027;&#x80FD;&#x6D4B;&#x8BD5;</h2>\n<p>autocannon -c 100 -d 5 -p 1 http://127.0.0.1:3000/</p>\n<h3 id="&#x538B;&#x6D4B;"><a href="#&#x538B;&#x6D4B;"></a>&#x538B;&#x6D4B;</h3>\n<p>ab&#xA0;-c&#xA0;10&#xA0;-n&#xA0;1000&#xA0;http://localhost:3000/en-US/\nor&#xA0;\nautocannon&#xA0;-c&#xA0;10&#xA0;-a&#xA0;1000&#xA0;http://localhost:3000/en-US/\ncombined&#xA0;with</p>\n<h3 id="&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x5206;&#x6790;&#x57FA;&#x672C;&#x6B65;&#x9AA4;"><a href="#&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x5206;&#x6790;&#x57FA;&#x672C;&#x6B65;&#x9AA4;"></a>&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x5206;&#x6790;&#x57FA;&#x672C;&#x6B65;&#x9AA4;</h3>\n<ol start="0">\n<li>&#x6DFB;&#x52A0; require(&apos;heapdump&apos;) &#x5230; server/index.ts</li>\n<li>npm&#xA0;run&#xA0;build</li>\n<li>npm&#xA0;run&#xA0;start</li>\n<li>lsof&#xA0;-i:3000</li>\n<li>kill&#xA0;-USR2&#xA0;<pid>&#xFF08;&#x7B2C;&#x4E09;&#x6B65;&#x67E5;&#x770B;&#x5230;&#x7684;pid&#xFF09;</pid></li>\n<li>&#x6839;&#x636E;&#x60C5;&#x51B5;&#x8C03;&#x6574;&#x538B;&#x6D4B;&#x53C2;&#x6570; autocannon&#xA0;-c&#xA0;10&#xA0;-a&#xA0;10&#xA0;http://localhost:3000/en-US/</li>\n<li>&#x91CD;&#x590D;&#x6267;&#x884C;3&#x6B21;&#x6B65;&#x9AA4;&#xA0;4&#xFF0C;5</li>\n<li>&#x6D4F;&#x89C8;&#x5668;&#x6253;&#x5F00;&#x63A7;&#x5236;&#x53F0;memory&#x680F;&#x76EE;&#xFF0C;&#x6309;&#x7167;&#x751F;&#x6210;&#x987A;&#x5E8F;&#x8F7D;&#x5165;&#x751F;&#x4EA7;&#x7684;&#x5185;&#x5B58;&#x5FEB;&#x7167;&#xA0;&#xA0;heapdump&#x5F00;&#x5934;&#x7684;&#x6587;&#x4EF6;</li>\n</ol>\n<h3 id="&#x590D;&#x6742;&#x5185;&#x5B58;node&#x5206;&#x6790;&#x57FA;&#x672C;&#x6B65;&#x9AA4;&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x8BBF;&#x95EE;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x6A21;&#x62DF;&#xFF09;"><a href="#&#x590D;&#x6742;&#x5185;&#x5B58;node&#x5206;&#x6790;&#x57FA;&#x672C;&#x6B65;&#x9AA4;&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x8BBF;&#x95EE;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x6A21;&#x62DF;&#xFF09;"></a>&#x590D;&#x6742;&#x5185;&#x5B58;node&#x5206;&#x6790;&#x57FA;&#x672C;&#x6B65;&#x9AA4;&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x8BBF;&#x95EE;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x6A21;&#x62DF;&#xFF09;</h3>\n<p>&#x6539;&#x53D8; autocannon &#x53C2;&#x6570;&#xFF1A; autocannon -c 10 -d 60 http://localhost:3000/en-US/\n&#x5176;&#x5B83;&#x540C;&#x4E0A;</p>\n<p>Todos:</p>\n<ol>\n<li>&#x9700;&#x8981;&#x589E;&#x52A0;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x6A21;&#x62DF;</li>\n</ol>\n',A=[{level:2,title:"nuxt JS",children:[{level:3,title:"一个请求到服务端后发生的",children:[]}]},{level:2,title:"Node 缓存方案对比",children:[{level:3,title:"[Redis]:",children:[]},{level:3,title:"[Simple Memory]:",children:[]},{level:3,title:"Redis 本地可视化测试",children:[]},{level:3,title:"结论：",children:[]}]},{level:2,title:"性能测试",children:[{level:3,title:"压测",children:[]},{level:3,title:"内存泄露分析基本步骤",children:[]},{level:3,title:"复杂内存node分析基本步骤（主要是增加了访问量，以及线上环境模拟）",children:[]}]}];export{x as attributes,F as html,A as nestedHeaders};
